# applicative microservices
microservices:
  - name: ms-sample-1
    dockerfile: ./microservices/ms_sample_1/Dockerfile
  - name: ms-sample-2
    dockerfile: ./microservices/p24_next_platform/api/Dockerfile
build:
  build_args: ''
  expand:
    - variable: PIPE_BUILD_ENV_FILE
      type: environment
  registry: 'build-@name@'
deployments:
  default:
    expand:
      - variable: PIPE_{{ .Environment }}_ENV_FILE
        type: environment
      - variable:  'PIPE_{{ .Environment }}_PLATFORM_ENV_FILE'
        name: platform
        type: file
    registry: '@promotion-env@-@name@'
    scripts:
      pre_execution: ''
      pre_deployment: ''
      post_deployment: ''
      post_execution:  ''
    helm:
      parameters: --set env.platform="$(base64 -w 0 ./platform.env)"
